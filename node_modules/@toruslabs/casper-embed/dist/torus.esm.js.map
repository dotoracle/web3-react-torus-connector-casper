{"version":3,"file":"torus.esm.js","sources":["../src/messages.ts","../src/interfaces.ts","../src/config.ts","../src/loglevel.ts","../src/utils.ts","../src/baseProvider.ts","../src/embedUtils.ts","../src/PopupHandler.ts","../src/communicationProvider.ts","../src/inPageProvider.ts","../src/siteMetadata.ts","../src/embed.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null],"names":["errors","disconnected","permanentlyDisconnected","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","TESTING","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","supportedVerifierList","api","prodTorusUrl","localStorageKey","window","location","hostname","loglevel","getLogger","createErrorMiddleware","req","res","next","error","ethErrors","rpc","invalidRequest","message","data","done","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","stack","warn","listenerCount","emit","getWindowId","Math","random","toString","slice","getTorusUrl","buildEnv","torusUrl","logLevel","getUserLanguage","userLanguage","navigator","language","userLanguages","split","Object","prototype","hasOwnProperty","call","config","FEATURES_PROVIDER_CHANGE_WINDOW","height","width","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_DEFAULT_POPUP_WINDOW","FEATURES_CONFIRM_WINDOW","storageAvailable","type","storage","x","setItem","removeItem","e","code","name","length","getPopupFeatures","w","h","dualScreenLeft","screenLeft","undefined","screenX","dualScreenTop","screenTop","screenY","innerWidth","document","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","left","abs","top","features","BaseProvider","SafeEventEmitter","constructor","connectionStream","jsonRpcStreamName","isDuplexStream","Error","messages","isTorus","setMaxListeners","_handleConnect","bind","_handleDisconnect","_handleStreamDisconnect","_rpcRequest","_initializeState","request","sendAsync","mux","ObjectMultiplex","pump","ignoreStream","jsonRpcConnection","createStreamMiddleware","stream","createStream","rpcEngine","JRPCEngine","push","createIdRemapMiddleware","createLoggerMiddleware","origin","middleware","_rpcEngine","jsonRpcConnectionEvents","events","args","Array","isArray","params","Promise","resolve","reject","getRpcPromiseCallback","send","payload","callback","streamName","handleEvent","handle","eventName","handler","handlerArgs","handlerWrapper","removeEventListener","addEventListener","documentReady","readyState","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","PopupHandler","url","target","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","closed","clearInterval","open","href","focus","close","redirect","locationReplaceOnRedirect","replace","TorusCommunicationProvider","_state","_defaultState","dappStorageKey","languageTranslations","configuration","embedTranslations","windowRefs","on","isConnected","notificationHandler","COMMUNICATION_NOTIFICATIONS","IFRAME_STATUS","isFullScreen","rid","_displayIframe","isFull","CREATE_WINDOW","windowId","_createPopupBlockAlert","CLOSE_WINDOW","_handleCloseWindow","USER_LOGGED_IN","currentLoginProvider","isLoggedIn","USER_LOGGED_OUT","isIFrameFullScreen","torusAlertContainer","torusIframe","COMMUNICATION_JRPC_METHODS","GET_PROVIDER_STATE","initialized","_handleWindow","finalUrl","URL","hash","handledWindow","OPENED_WINDOW","once","CLOSED_WINDOW","style","display","torusWidgetVisibility","buttonPosition","right","bottom","assign","hideTorusButton","showTorusButton","cb","_payload","jsonrpc","tryWindowHandle","debug","isRecoverable","errorMessage","isPermanentlyDisconnected","EthereumRpcError","logoUrl","getLogoUrl","torusAlert","successAlert","btnContainer","appendChild","bindOnLoad","remove","children","attachOnLoad","hasEmittedConnection","TorusInPageProvider","selectedAddress","_handleAccountsChanged","_handleChainChanged","_handleUnlockStateChanged","jsonRpcNotificationHandler","PROVIDER_NOTIFICATIONS","ACCOUNTS_CHANGED","UNLOCK_STATE_CHANGED","CHAIN_CHANGED","accounts","isUnlocked","PROVIDER_JRPC_METHODS","isInternal","err","result","isEthAccounts","finalAccounts","account","dequal","imgExists","img","onload","onerror","src","getSiteName","siteName","querySelector","metaTitle","title","getSiteIcon","icon","from","querySelectorAll","find","_icon","Boolean","getSiteMetadata","PROVIDER_UNSAFE_METHODS","COMMUNICATION_UNSAFE_METHODS","SET_PROVIDER","isLocalStorageAvailable","preLoadIframe","torusIframeHtml","crossOrigin","rel","relList","supports","head","Torus","modalZIndex","isInitialized","requestedLoginProvider","alertZIndex","init","enableLogging","network","useLocalStorage","apiKey","setAPIKey","setDefaultLevel","enableAll","disableAll","handleDappStorageKey","torusIframeUrl","pathname","endsWith","hashParams","URLSearchParams","append","styleLink","handleSetup","body","dappMetadata","contentWindow","postMessage","_setupWeb3","login","loginProvider","communicationProvider","provider","login_hint","logout","LOGOUT","cleanUp","clearInit","isElement","element","Element","Document","contains","setProvider","showWallet","path","instanceId","WALLET_INSTANCE_ID","finalPath","searchParams","keys","forEach","walletWindow","getUserInfo","userInfoResponse","USER_INFO","initiateTopup","topupResponse","TOPUP","providerParams","providerStream","BasePostMessageStream","targetWindow","targetOrigin","communicationStream","inPageProvider","includes","detectAccountRequestPrototypeModifier","m","originalMethod","self","providerFunc","then","catch","apply","proxiedInPageProvider","Proxy","deleteProperty","proxiedCommunicationProvider","all","storedKey","localStorage","getItem","generatedKey"],"mappings":"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"}